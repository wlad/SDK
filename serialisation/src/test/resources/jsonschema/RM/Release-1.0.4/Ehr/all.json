{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Ehr/all.json",
  "title": "Ehr IM definitions",
  "description": "The EHR IM defines the containment and context semantics of the concepts EHR, COMPOSITION, SECTION, and ENTRY. These classes are the major coarse-grained components of the EHR, and correspond directly to the classes of the same names in CEN EN13606:2005 and fairly closely to the  levels  of the same names in the HL7 Clinical Document Architecture (CDA) release 2.0. ",
  "$comments": "Part of RM component, Release-1.0.4 version.",
  "definitions": {
    "EHR": {
      "title": "EHR",
      "description": "The EHR object is the root object and access point of an EHR for a subject of care. ",
      "$comments": "Defined in Ehr IM",
      "type": "object",
      "properties": {
        "system_id": {
          "description": "The identifier of the logical EHR management system in which this EHR was created. \n",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/HIER_OBJECT_ID"
        },
        "ehr_id": {
          "description": "The unique identifier of this EHR.\n\nNOTE: is is strongly recommended that a UUID always be used for this field.",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/HIER_OBJECT_ID"
        },
        "contributions": {
          "description": "List of contributions causing changes to this EHR. Each contribution contains a list of versions, which may include references to any number of `VERSION` instances, i.e. items of type `VERSIONED_COMPOSITION` and `VERSIONED_FOLDER`. ",
          "type": "array",
          "items": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/CONTRIBUTION"
          }
        },
        "ehr_status": {
          "description": "Reference to `EHR_STATUS` object for this EHR.",
          "$ref": "#/definitions/VERSIONED_EHR_STATUS"
        },
        "ehr_access": {
          "description": "Reference to `EHR_ACCESS` object for this EHR.",
          "$ref": "#/definitions/VERSIONED_EHR_ACCESS"
        },
        "compositions": {
          "description": "Master list of all Versioned Composition references in this EHR.",
          "type": "array",
          "items": {
            "$ref": "#/definitions/VERSIONED_COMPOSITION"
          }
        },
        "directory": {
          "description": "Optional directory structure for this EHR. ",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/VERSIONED_FOLDER"
        },
        "time_created": {
          "description": "Time of creation of the EHR.",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Data_types/all.json#/definitions/DV_DATE_TIME"
        }
      },
      "required": [
        "system_id",
        "ehr_id",
        "ehr_status",
        "ehr_access",
        "time_created"
      ],
      "$invariants": {
        "Contributions_valid": "contributions.for_all (c | c.type.is_equal(\u201cCONTRIBUTION\u201d))",
        "Ehr_access_valid": "ehr_access.type.is_equal (\u201cVERSIONED_EHR_ACCESS\u201d)",
        "Ehr_status_valid": "ehr_status.type.is_equal(\u201cVERSIONED_EHR_STATUS\u201d)",
        "Compositions_valid": "compositions.for_all (c | c.type.is_equal (\u201cVERSIONED_COMPOSITION\u201d))",
        "Directory_valid": "directory /= Void implies directory.type.is_equal (\u201cVERSIONED_FOLDER\u201d)"
      }
    },
    "VERSIONED_EHR_ACCESS": {
      "title": "VERSIONED_EHR_ACCESS",
      "description": "Version container for EHR_ACCESS instance.",
      "$comments": "Defined in Ehr IM, inherits from VERSIONED_OBJECT",
      "type": "object",
      "properties": {
        "uid": {
          "description": "Unique identifier of this version container in the form of a UID with no extension. This id will be the same in all instances of the same container in a distributed environment, meaning that it can be understood as the uid of the  virtual version tree. ",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/HIER_OBJECT_ID"
        },
        "owner_id": {
          "description": "Reference to object to which this version container belongs, e.g. the id of the containing EHR or other relevant owning entity. ",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_REF"
        },
        "time_created": {
          "description": "Time of initial creation of this versioned object. ",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Data_types/all.json#/definitions/DV_DATE_TIME"
        }
      },
      "required": [
        "uid",
        "owner_id",
        "time_created"
      ],
      "$inherits": [
        "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/VERSIONED_OBJECT"
      ],
      "$functions": {
        "version_count": {
          "description": "Return the total number of versions in this object.",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Integer"
          }
        },
        "all_version_ids": {
          "description": "Return a list of ids of all versions in this object. ",
          "return": {
            "type": "array",
            "items": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            },
            "minItems": 1
          }
        },
        "all_versions": {
          "description": "Return a list of all versions in this object. ",
          "return": {
            "type": "array",
            "items": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/VERSION"
            },
            "minItems": 1
          }
        },
        "has_version_at_time": {
          "description": "True if a version for time  `_a_time_` exists. ",
          "parameters": {
            "a_ver_id": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            }
          },
          "required_parameters": [
            "a_ver_id"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Boolean"
          }
        },
        "has_version_id": {
          "description": "True if a version with `_an_id_` exists. ",
          "parameters": {
            "a_ver_id": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            }
          },
          "required_parameters": [
            "a_ver_id"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Boolean"
          }
        },
        "version_with_id": {
          "description": "Return the version with `_uid_` =  `_a_ver_id_`. \n",
          "parameters": {
            "a_ver_id": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            }
          },
          "required_parameters": [
            "a_ver_id"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/VERSION"
          }
        },
        "is_original_version": {
          "description": "True if version with `_an_id_` is an `ORIGINAL_VERSION`. ",
          "parameters": {
            "a_ver_id": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            }
          },
          "required_parameters": [
            "a_ver_id"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Boolean"
          }
        },
        "version_at_time": {
          "description": "Return the version for time  `_a_time_`. ",
          "parameters": {
            "a_time": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Data_types/all.json#/definitions/DV_DATE_TIME"
            }
          },
          "required_parameters": [
            "a_time"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/VERSION"
          }
        },
        "revision_history": {
          "description": "History of all audits and attestations in this versioned repository.",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/REVISION_HISTORY"
          }
        },
        "latest_version": {
          "description": "Return the most recently added version (i.e. on trunk or any branch). ",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/VERSION"
          }
        },
        "latest_trunk_version": {
          "description": "Return the most recently added trunk version. ",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/VERSION"
          }
        },
        "trunk_lifecycle_state": {
          "description": "Return the lifecycle state from the latest trunk version. Useful for determining if the version container is logically deleted. ",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Data_types/all.json#/definitions/DV_CODED_TEXT"
          }
        },
        "commit_original_version": {
          "description": "Add a new original version. ",
          "parameters": {
            "a_contribution": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_REF"
            },
            "a_new_version_uid": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            },
            "a_preceding_version_id": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            },
            "an_audit": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/AUDIT_DETAILS"
            },
            "a_lifecycle_state": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Data_types/all.json#/definitions/DV_CODED_TEXT"
            },
            "a_data": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/T"
            },
            "signing_key": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
            }
          },
          "required_parameters": [
            "a_contribution",
            "a_new_version_uid",
            "a_preceding_version_id",
            "an_audit",
            "a_lifecycle_state",
            "a_data",
            "signing_key"
          ]
        },
        "commit_original_merged_version": {
          "description": "Add a new original merged version. This commit function adds a parameter containing the ids of other versions merged into the current one. ",
          "parameters": {
            "a_contribution": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_REF"
            },
            "a_new_version_uid": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            },
            "a_preceding_version_id": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            },
            "an_audit": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/AUDIT_DETAILS"
            },
            "a_lifecycle_state": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Data_types/all.json#/definitions/DV_CODED_TEXT"
            },
            "a_data": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/T"
            },
            "an_other_input_uids": {
              "type": "array",
              "items": {
                "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
              },
              "minItems": 1
            },
            "signing_key": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
            }
          },
          "required_parameters": [
            "a_contribution",
            "a_new_version_uid",
            "a_preceding_version_id",
            "an_audit",
            "a_lifecycle_state",
            "a_data",
            "an_other_input_uids",
            "signing_key"
          ]
        },
        "commit_imported_version": {
          "description": "Add a new imported version. Details of version id etc come from the `ORIGINAL_VERSION` being committed. ",
          "parameters": {
            "a_contribution": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_REF"
            },
            "an_audit": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/AUDIT_DETAILS"
            },
            "a_version": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/ORIGINAL_VERSION"
            }
          },
          "required_parameters": [
            "a_contribution",
            "an_audit",
            "a_version"
          ]
        },
        "commit_attestation": {
          "description": "Add a new attestation to a specified original version. Attestations can only be added to Original versions. ",
          "parameters": {
            "an_attestation": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/ATTESTATION"
            },
            "a_ver_id": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            },
            "signing_key": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
            }
          },
          "required_parameters": [
            "an_attestation",
            "a_ver_id",
            "signing_key"
          ]
        }
      },
      "$invariants": {
        "Version_count_valid": "version_count >= 0",
        "All_version_ids_valid": "all_version_ids.count = version_count",
        "All_versions_valid": "all_versions.count = version_count",
        "Latest_version_valid": "version_count > 0 implies latest_version /= Void",
        "Uid_validity": "extension.is_empty",
        "Pre": "has_version_id(a_ver_id)\nand is_original_version(a_ver_id)",
        "Post": "Result = latest_trunk_version.lifecycle_state"
      }
    },
    "VERSIONED_EHR_STATUS": {
      "title": "VERSIONED_EHR_STATUS",
      "description": "Version container for EHR_STATUS instance.",
      "$comments": "Defined in Ehr IM, inherits from VERSIONED_OBJECT",
      "type": "object",
      "properties": {
        "uid": {
          "description": "Unique identifier of this version container in the form of a UID with no extension. This id will be the same in all instances of the same container in a distributed environment, meaning that it can be understood as the uid of the  virtual version tree. ",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/HIER_OBJECT_ID"
        },
        "owner_id": {
          "description": "Reference to object to which this version container belongs, e.g. the id of the containing EHR or other relevant owning entity. ",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_REF"
        },
        "time_created": {
          "description": "Time of initial creation of this versioned object. ",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Data_types/all.json#/definitions/DV_DATE_TIME"
        }
      },
      "required": [
        "uid",
        "owner_id",
        "time_created"
      ],
      "$inherits": [
        "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/VERSIONED_OBJECT"
      ],
      "$functions": {
        "version_count": {
          "description": "Return the total number of versions in this object.",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Integer"
          }
        },
        "all_version_ids": {
          "description": "Return a list of ids of all versions in this object. ",
          "return": {
            "type": "array",
            "items": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            },
            "minItems": 1
          }
        },
        "all_versions": {
          "description": "Return a list of all versions in this object. ",
          "return": {
            "type": "array",
            "items": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/VERSION"
            },
            "minItems": 1
          }
        },
        "has_version_at_time": {
          "description": "True if a version for time  `_a_time_` exists. ",
          "parameters": {
            "a_ver_id": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            }
          },
          "required_parameters": [
            "a_ver_id"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Boolean"
          }
        },
        "has_version_id": {
          "description": "True if a version with `_an_id_` exists. ",
          "parameters": {
            "a_ver_id": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            }
          },
          "required_parameters": [
            "a_ver_id"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Boolean"
          }
        },
        "version_with_id": {
          "description": "Return the version with `_uid_` =  `_a_ver_id_`. \n",
          "parameters": {
            "a_ver_id": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            }
          },
          "required_parameters": [
            "a_ver_id"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/VERSION"
          }
        },
        "is_original_version": {
          "description": "True if version with `_an_id_` is an `ORIGINAL_VERSION`. ",
          "parameters": {
            "a_ver_id": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            }
          },
          "required_parameters": [
            "a_ver_id"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Boolean"
          }
        },
        "version_at_time": {
          "description": "Return the version for time  `_a_time_`. ",
          "parameters": {
            "a_time": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Data_types/all.json#/definitions/DV_DATE_TIME"
            }
          },
          "required_parameters": [
            "a_time"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/VERSION"
          }
        },
        "revision_history": {
          "description": "History of all audits and attestations in this versioned repository.",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/REVISION_HISTORY"
          }
        },
        "latest_version": {
          "description": "Return the most recently added version (i.e. on trunk or any branch). ",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/VERSION"
          }
        },
        "latest_trunk_version": {
          "description": "Return the most recently added trunk version. ",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/VERSION"
          }
        },
        "trunk_lifecycle_state": {
          "description": "Return the lifecycle state from the latest trunk version. Useful for determining if the version container is logically deleted. ",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Data_types/all.json#/definitions/DV_CODED_TEXT"
          }
        },
        "commit_original_version": {
          "description": "Add a new original version. ",
          "parameters": {
            "a_contribution": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_REF"
            },
            "a_new_version_uid": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            },
            "a_preceding_version_id": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            },
            "an_audit": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/AUDIT_DETAILS"
            },
            "a_lifecycle_state": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Data_types/all.json#/definitions/DV_CODED_TEXT"
            },
            "a_data": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/T"
            },
            "signing_key": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
            }
          },
          "required_parameters": [
            "a_contribution",
            "a_new_version_uid",
            "a_preceding_version_id",
            "an_audit",
            "a_lifecycle_state",
            "a_data",
            "signing_key"
          ]
        },
        "commit_original_merged_version": {
          "description": "Add a new original merged version. This commit function adds a parameter containing the ids of other versions merged into the current one. ",
          "parameters": {
            "a_contribution": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_REF"
            },
            "a_new_version_uid": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            },
            "a_preceding_version_id": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            },
            "an_audit": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/AUDIT_DETAILS"
            },
            "a_lifecycle_state": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Data_types/all.json#/definitions/DV_CODED_TEXT"
            },
            "a_data": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/T"
            },
            "an_other_input_uids": {
              "type": "array",
              "items": {
                "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
              },
              "minItems": 1
            },
            "signing_key": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
            }
          },
          "required_parameters": [
            "a_contribution",
            "a_new_version_uid",
            "a_preceding_version_id",
            "an_audit",
            "a_lifecycle_state",
            "a_data",
            "an_other_input_uids",
            "signing_key"
          ]
        },
        "commit_imported_version": {
          "description": "Add a new imported version. Details of version id etc come from the `ORIGINAL_VERSION` being committed. ",
          "parameters": {
            "a_contribution": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_REF"
            },
            "an_audit": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/AUDIT_DETAILS"
            },
            "a_version": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/ORIGINAL_VERSION"
            }
          },
          "required_parameters": [
            "a_contribution",
            "an_audit",
            "a_version"
          ]
        },
        "commit_attestation": {
          "description": "Add a new attestation to a specified original version. Attestations can only be added to Original versions. ",
          "parameters": {
            "an_attestation": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/ATTESTATION"
            },
            "a_ver_id": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            },
            "signing_key": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
            }
          },
          "required_parameters": [
            "an_attestation",
            "a_ver_id",
            "signing_key"
          ]
        }
      },
      "$invariants": {
        "Version_count_valid": "version_count >= 0",
        "All_version_ids_valid": "all_version_ids.count = version_count",
        "All_versions_valid": "all_versions.count = version_count",
        "Latest_version_valid": "version_count > 0 implies latest_version /= Void",
        "Uid_validity": "extension.is_empty",
        "Pre": "has_version_id(a_ver_id)\nand is_original_version(a_ver_id)",
        "Post": "Result = latest_trunk_version.lifecycle_state"
      }
    },
    "VERSIONED_COMPOSITION": {
      "title": "VERSIONED_COMPOSITION",
      "description": "Version-controlled composition abstraction, defined by inheriting `VERSIONED_OBJECT<COMPOSITION>`. ",
      "$comments": "Defined in Ehr IM, inherits from VERSIONED_OBJECT",
      "type": "object",
      "properties": {
        "uid": {
          "description": "Unique identifier of this version container in the form of a UID with no extension. This id will be the same in all instances of the same container in a distributed environment, meaning that it can be understood as the uid of the  virtual version tree. ",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/HIER_OBJECT_ID"
        },
        "owner_id": {
          "description": "Reference to object to which this version container belongs, e.g. the id of the containing EHR or other relevant owning entity. ",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_REF"
        },
        "time_created": {
          "description": "Time of initial creation of this versioned object. ",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Data_types/all.json#/definitions/DV_DATE_TIME"
        }
      },
      "required": [
        "uid",
        "owner_id",
        "time_created"
      ],
      "$inherits": [
        "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/VERSIONED_OBJECT"
      ],
      "$functions": {
        "version_count": {
          "description": "Return the total number of versions in this object.",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Integer"
          }
        },
        "all_version_ids": {
          "description": "Return a list of ids of all versions in this object. ",
          "return": {
            "type": "array",
            "items": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            },
            "minItems": 1
          }
        },
        "all_versions": {
          "description": "Return a list of all versions in this object. ",
          "return": {
            "type": "array",
            "items": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/VERSION"
            },
            "minItems": 1
          }
        },
        "has_version_at_time": {
          "description": "True if a version for time  `_a_time_` exists. ",
          "parameters": {
            "a_ver_id": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            }
          },
          "required_parameters": [
            "a_ver_id"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Boolean"
          }
        },
        "has_version_id": {
          "description": "True if a version with `_an_id_` exists. ",
          "parameters": {
            "a_ver_id": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            }
          },
          "required_parameters": [
            "a_ver_id"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Boolean"
          }
        },
        "version_with_id": {
          "description": "Return the version with `_uid_` =  `_a_ver_id_`. \n",
          "parameters": {
            "a_ver_id": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            }
          },
          "required_parameters": [
            "a_ver_id"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/VERSION"
          }
        },
        "is_original_version": {
          "description": "True if version with `_an_id_` is an `ORIGINAL_VERSION`. ",
          "parameters": {
            "a_ver_id": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            }
          },
          "required_parameters": [
            "a_ver_id"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Boolean"
          }
        },
        "version_at_time": {
          "description": "Return the version for time  `_a_time_`. ",
          "parameters": {
            "a_time": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Data_types/all.json#/definitions/DV_DATE_TIME"
            }
          },
          "required_parameters": [
            "a_time"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/VERSION"
          }
        },
        "revision_history": {
          "description": "History of all audits and attestations in this versioned repository.",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/REVISION_HISTORY"
          }
        },
        "latest_version": {
          "description": "Return the most recently added version (i.e. on trunk or any branch). ",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/VERSION"
          }
        },
        "latest_trunk_version": {
          "description": "Return the most recently added trunk version. ",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/VERSION"
          }
        },
        "trunk_lifecycle_state": {
          "description": "Return the lifecycle state from the latest trunk version. Useful for determining if the version container is logically deleted. ",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Data_types/all.json#/definitions/DV_CODED_TEXT"
          }
        },
        "commit_original_version": {
          "description": "Add a new original version. ",
          "parameters": {
            "a_contribution": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_REF"
            },
            "a_new_version_uid": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            },
            "a_preceding_version_id": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            },
            "an_audit": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/AUDIT_DETAILS"
            },
            "a_lifecycle_state": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Data_types/all.json#/definitions/DV_CODED_TEXT"
            },
            "a_data": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/T"
            },
            "signing_key": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
            }
          },
          "required_parameters": [
            "a_contribution",
            "a_new_version_uid",
            "a_preceding_version_id",
            "an_audit",
            "a_lifecycle_state",
            "a_data",
            "signing_key"
          ]
        },
        "commit_original_merged_version": {
          "description": "Add a new original merged version. This commit function adds a parameter containing the ids of other versions merged into the current one. ",
          "parameters": {
            "a_contribution": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_REF"
            },
            "a_new_version_uid": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            },
            "a_preceding_version_id": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            },
            "an_audit": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/AUDIT_DETAILS"
            },
            "a_lifecycle_state": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Data_types/all.json#/definitions/DV_CODED_TEXT"
            },
            "a_data": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/T"
            },
            "an_other_input_uids": {
              "type": "array",
              "items": {
                "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
              },
              "minItems": 1
            },
            "signing_key": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
            }
          },
          "required_parameters": [
            "a_contribution",
            "a_new_version_uid",
            "a_preceding_version_id",
            "an_audit",
            "a_lifecycle_state",
            "a_data",
            "an_other_input_uids",
            "signing_key"
          ]
        },
        "commit_imported_version": {
          "description": "Add a new imported version. Details of version id etc come from the `ORIGINAL_VERSION` being committed. ",
          "parameters": {
            "a_contribution": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_REF"
            },
            "an_audit": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/AUDIT_DETAILS"
            },
            "a_version": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/ORIGINAL_VERSION"
            }
          },
          "required_parameters": [
            "a_contribution",
            "an_audit",
            "a_version"
          ]
        },
        "commit_attestation": {
          "description": "Add a new attestation to a specified original version. Attestations can only be added to Original versions. ",
          "parameters": {
            "an_attestation": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/ATTESTATION"
            },
            "a_ver_id": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/OBJECT_VERSION_ID"
            },
            "signing_key": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
            }
          },
          "required_parameters": [
            "an_attestation",
            "a_ver_id",
            "signing_key"
          ]
        },
        "is_persistent": {
          "description": "Indicates whether this composition set is persistent; derived from first version.",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Boolean"
          }
        }
      },
      "$invariants": {
        "Version_count_valid": "version_count >= 0",
        "All_version_ids_valid": "all_version_ids.count = version_count",
        "All_versions_valid": "all_versions.count = version_count",
        "Latest_version_valid": "version_count > 0 implies latest_version /= Void",
        "Uid_validity": "extension.is_empty",
        "Pre": "has_version_id(a_ver_id)\nand is_original_version(a_ver_id)",
        "Post": "Result = latest_trunk_version.lifecycle_state",
        "Archetype_node_id_valid": "all_versions.for_all (v | v.archetype_node_id.is_equal (all_versions.first.archetype_node_id))",
        "Persistent_validity": "all_versions.for_all (v | v.is_persistent = all_versions.first.data.is_persistent)"
      }
    },
    "EHR_ACCESS": {
      "title": "EHR_ACCESS",
      "description": "EHR-wide access contol object. All access decisions to data in the EHR must be made in accordance with the policies and rules in this object. ",
      "$comments": "Defined in Ehr IM, inherits from LOCATABLE",
      "type": "object",
      "properties": {
        "name": {
          "description": "Runtime name of this fragment, used to build runtime paths. This is the term provided via a clinical application or batch process to name this EHR construct: its retention in the EHR faithfully preserves the original label by which this entry was known to end users. \n",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Data_types/all.json#/definitions/DV_TEXT"
        },
        "archetype_node_id": {
          "description": "Design-time archetype id of this node taken from its generating archetype; used to build archetype paths. Always in the form of an  at  code, e.g.  at0005 . This value enables a \"standardised\" name for this node to be generated, by referring to the generating archetype local ontology. \n\nAt an archetype root point, the value of this attribute is always the stringified form of the archetype_id found in the archetype_details object. \n",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
        },
        "uid": {
          "description": "Optional globally unique object identifier for root points of archetyped structures. ",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/UID_BASED_ID"
        },
        "links": {
          "description": "Links to other archetyped structures (data whose root object inherits from ARCHETYPED, such as ENTRY, SECTION and so on). Links may be to structures in other compositions. ",
          "type": "array",
          "items": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/LINK"
          }
        },
        "archetype_details": {
          "description": "Details of archetyping used on this node.",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/ARCHETYPED"
        },
        "feeder_audit": {
          "description": "Audit trail from non-openEHR system of original commit of information forming the content of this node, or from a conversion gateway which has synthesised this node. ",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/FEEDER_AUDIT"
        },
        "settings": {
          "description": "Access control settings for the EHR. Instance is a subtype of the type `ACCESS_CONTROL_SETTINGS`, allowing for the use of different access control schemes. ",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Security/all.json#/definitions/ACCESS_CONTROL_SETTINGS"
        }
      },
      "required": [
        "name",
        "archetype_node_id"
      ],
      "$inherits": [
        "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/LOCATABLE"
      ],
      "$functions": {
        "parent": {
          "description": "Parent of this node in a compositional hierarchy. \n",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/PATHABLE"
          }
        },
        "item_at_path": {
          "description": "The item at a path (relative to this item); only valid for unique paths, i.e. paths that resolve to a single item. ",
          "parameters": {
            "a_path": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
            }
          },
          "required_parameters": [
            "a_path"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Any"
          }
        },
        "items_at_path": {
          "description": "List of items corresponding to a non-unique path.",
          "parameters": {
            "a_path": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
            }
          },
          "required_parameters": [
            "a_path"
          ],
          "return": {
            "type": "array",
            "items": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Any"
            }
          }
        },
        "path_exists": {
          "description": "True if the path exists in the data with respect to the current item. ",
          "parameters": {
            "a_path": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
            }
          },
          "required_parameters": [
            "a_path"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Boolean"
          }
        },
        "path_unique": {
          "description": "True if the path corresponds to a single item in the data. ",
          "parameters": {
            "a_path": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
            }
          },
          "required_parameters": [
            "a_path"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Boolean"
          }
        },
        "path_of_item": {
          "description": "The path to an item relative to the root of this archetyped structure.",
          "parameters": {
            "a_loc": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/PATHABLE"
            }
          },
          "required_parameters": [
            "a_loc"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
          }
        },
        "concept": {
          "description": "Clinical concept of the archetype as a whole (= derived from the archetype_node_id' of the root node) ",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Data_types/all.json#/definitions/DV_TEXT"
          }
        },
        "is_archetype_root": {
          "description": "True if this node is the root of an archetyped structure.",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Boolean"
          }
        },
        "scheme": {
          "description": "The name of the access control scheme in use; corresponds to the concrete instance of the settings attribute. ",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
          }
        }
      },
      "$invariants": {
        "Pre": "path_exists (a_path)",
        "Links_valid": "links /= Void implies not links.is_empty",
        "Archetyped_valid": "is_archetype_root xor archetype_details = Void",
        "Archetype_node_id_valid": "not archetype_node_id.is_empty",
        "Scheme_valid": "not scheme.is_empty",
        "Is_archetype_root": "is_archetype_root"
      }
    },
    "EHR_STATUS": {
      "title": "EHR_STATUS",
      "description": "Single object per EHR containing various EHR-wide status flags and settings, including whether this EHR can be queried, modified etc. This object is always modifiable, in order to change the status of the EHR as a whole.",
      "$comments": "Defined in Ehr IM, inherits from LOCATABLE",
      "type": "object",
      "properties": {
        "name": {
          "description": "Runtime name of this fragment, used to build runtime paths. This is the term provided via a clinical application or batch process to name this EHR construct: its retention in the EHR faithfully preserves the original label by which this entry was known to end users. \n",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Data_types/all.json#/definitions/DV_TEXT"
        },
        "archetype_node_id": {
          "description": "Design-time archetype id of this node taken from its generating archetype; used to build archetype paths. Always in the form of an  at  code, e.g.  at0005 . This value enables a \"standardised\" name for this node to be generated, by referring to the generating archetype local ontology. \n\nAt an archetype root point, the value of this attribute is always the stringified form of the archetype_id found in the archetype_details object. \n",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
        },
        "uid": {
          "description": "Optional globally unique object identifier for root points of archetyped structures. ",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Base_types/all.json#/definitions/UID_BASED_ID"
        },
        "links": {
          "description": "Links to other archetyped structures (data whose root object inherits from ARCHETYPED, such as ENTRY, SECTION and so on). Links may be to structures in other compositions. ",
          "type": "array",
          "items": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/LINK"
          }
        },
        "archetype_details": {
          "description": "Details of archetyping used on this node.",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/ARCHETYPED"
        },
        "feeder_audit": {
          "description": "Audit trail from non-openEHR system of original commit of information forming the content of this node, or from a conversion gateway which has synthesised this node. ",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/FEEDER_AUDIT"
        },
        "subject": {
          "description": "The subject of this EHR. The `_external_ref_` attribute can be used to contain a direct reference to the subject in a demographic or identity service. Alternatively, the association between patients and their records may be done elsewhere for security reasons. ",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/PARTY_SELF"
        },
        "is_queryable": {
          "description": "True if this EHR should be included in population queries, i.e. if this EHR is considered active in the population.",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Boolean"
        },
        "is_modifiable": {
          "description": "True if the EHR, other than the `EHR_STATUS` object, is allowed to be written to. The `EHR_STATUS` object itself can always be written to.",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Boolean"
        },
        "other_details": {
          "description": "Any other details of the EHR summary object, in the form of an archetyped `ITEM_STRUCTURE`.",
          "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Data_structures/all.json#/definitions/ITEM_STRUCTURE"
        }
      },
      "required": [
        "name",
        "archetype_node_id",
        "subject",
        "is_queryable",
        "is_modifiable"
      ],
      "$inherits": [
        "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/LOCATABLE"
      ],
      "$functions": {
        "parent": {
          "description": "Parent of this node in a compositional hierarchy. \n",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/PATHABLE"
          }
        },
        "item_at_path": {
          "description": "The item at a path (relative to this item); only valid for unique paths, i.e. paths that resolve to a single item. ",
          "parameters": {
            "a_path": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
            }
          },
          "required_parameters": [
            "a_path"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Any"
          }
        },
        "items_at_path": {
          "description": "List of items corresponding to a non-unique path.",
          "parameters": {
            "a_path": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
            }
          },
          "required_parameters": [
            "a_path"
          ],
          "return": {
            "type": "array",
            "items": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Any"
            }
          }
        },
        "path_exists": {
          "description": "True if the path exists in the data with respect to the current item. ",
          "parameters": {
            "a_path": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
            }
          },
          "required_parameters": [
            "a_path"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Boolean"
          }
        },
        "path_unique": {
          "description": "True if the path corresponds to a single item in the data. ",
          "parameters": {
            "a_path": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
            }
          },
          "required_parameters": [
            "a_path"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Boolean"
          }
        },
        "path_of_item": {
          "description": "The path to an item relative to the root of this archetyped structure.",
          "parameters": {
            "a_loc": {
              "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Common/all.json#/definitions/PATHABLE"
            }
          },
          "required_parameters": [
            "a_loc"
          ],
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/String"
          }
        },
        "concept": {
          "description": "Clinical concept of the archetype as a whole (= derived from the archetype_node_id' of the root node) ",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/RM/Release-1.0.4/Data_types/all.json#/definitions/DV_TEXT"
          }
        },
        "is_archetype_root": {
          "description": "True if this node is the root of an archetyped structure.",
          "return": {
            "$ref": "https://specifications.openehr.org/releases/ITS-JSON/latest/components/BASE/Release-1.1.0/Foundation_types/all.json#/definitions/Boolean"
          }
        }
      },
      "$invariants": {
        "Pre": "path_exists (a_path)",
        "Links_valid": "links /= Void implies not links.is_empty",
        "Archetyped_valid": "is_archetype_root xor archetype_details = Void",
        "Archetype_node_id_valid": "not archetype_node_id.is_empty",
        "Is_archetype_root": "is_archetype_root"
      }
    }
  },
  "$component": "RM",
  "$version": "Release-1.0.4"
}